# 14. 데이터 모델링
서비스의 전체 개발 과정에서 데이터베이스 관련 부분을 단계적으로 보면 `개념 설계 -> 논리 설계 -> 물리 설계 -> DBMS 구축`으로 나뉜다. 거의 대부분의 경우 논리 설계와 물리 설계를 구분하지 않고 ERD로 그린다.


## 14.1 논리 모델링
- 엔터티의 범위 확정
- 필수 속성 정의
- 각 엔터티의 의미상 식별자 정의
- 각 엔터티 간의 관계를 최대한 간결히 표현

ERD의 가장 중요한 점은 엔터티의 관계를 이해하기 쉽게 하는 것이다.


### 용어집
용어집은 엔터티의 범위를 정하는데 중요한 역할을 한다. 주요 용어에 대해서는 모든 가능한 경우의 관련 단어를 나열하고, 그 의미를 포함할지 뺄지 체크한다. 그리고 그에 걸맞는 이름을 부여하고, 그에 맞춰 타입이나 기타 옵션을 정의하는 것이 좋다. 그리고 용어 설명은 프로젝트에 맞는 정확한 설명이 필요하다.

예를 들어 "고객" 용어에 대한 아래의 설명은 매우 좋지 않다.

```
고객 - 우리 회사의 고객
```

이는 문서가 아무런 의미를 갖지 못한다. 아래와 같이 하는 것이 좋다.

```
고객 - my-shop.com 온라인 몰의 회원으로 가입한 만 19세 이상의 모든 국내 거주 개인 사용자
```

### 엔터티
엔터티는 객체지향 개벌 언어의 클래스와 등급의 의미이다. 엔티티를 도출할 때 가장 중요한 것은 용어의 정의다. 해당 용어가 의미하는 범위가 어디까지인지를 명확히 하고 그에 걸맞는 이름을 부여해야한다.
- 키 엔터티: 관리 대상 데이터 중에서 가장 취상위에 존재하는 엔터티로서, 일반적으로 메인 엔터티와 액션 엔터티를 만들어내는 부모 역할을 한다.(일반적으로 사원, 고객, 상품 등이 있다.)
- 액션 엔터티: 키 엔티티 간의 관계로 만들어지는 엔터티를 말한다. 예를 들어 엔티티 관계 중 유저-친구가 있다고 하면 "유저"는 키 엔터티이고, "친구"는 액션 엔터티이다.
- 메인 엔터티: 액션 엔터티 중 중요한 역할을 하는 엔터티를 메인 엔터티라고 한다.

#### 엔터티 작명
엔터티의 이름은 복수형 표현을 사용하지 않고 별도의 수식어가 없는 단순 또는 복합 명사 형태를 사용한다.
- "직원용상품", "고객용상품" 이라는 용어는 적합하지 않다.
- "리스트", "목록"과 같은 복수를 의미하는 단어는 사용하지 않는 것이 좋다.
- "정보"와 같은 범위가 애매모호한 단어도 피한다.


### 어트리뷰트(속성)
어트리뷰트란 더는 분리될 수 없는 최소의 데이터 보관 단위이다. 어트리뷰트는 반드시 독자적인 성질을 가지는 하나의 값만을 저장해야 한다.
- 하나의 어트리뷰트는 해당 업무 요건에 맞게 최소 단위의 값 하나만 가져야 한다.
- 하나의 어트리뷰트에 복수형으로 값을 저장해서는 안된다.

#### 어트리뷰트 작명
어트리뷰트 이름은 반드시 "한정자 + 값을 표현하는 명사"로 구성하는 것이 가장 이상적이다. 의미 전달이 부족하면 추가 한정자를 더 붙여야 한다.
- "번호"라는 어트리뷰트보다는 "회원아이디" 또는 "회원일련번호"와 같은 작명이 좋다.(아이디랑 번호를 혼용하는 것은 좋지 않다.)
- "로그인일시"라는 이름도 필요에 따라 "최종로그인일시" 또는 "최초로그인일시"와 같은 이름으로 의미를 정확히 나타내야한다.


### 식별자(프라이머리 키)
프라이머리 키 또는 식별자는 하나의 엔터티에서 개별 레코드를 식별할 수 있는 어트리뷰트의 조합을 의미한다. 일반적으로 키 엔터티는 식별자로 어트리뷰트 하나만을 가질 때가 많다.


## ERD 그려보기
- <https://www.draw.io/>

![erd](../images/14-erd.png)