### 5.1.1 디스크 읽기 방식

서버에 사용되는 저장매체

- 내장 디스크
- DAS (direct attached storage)
- NAS (network attached storage)
- SAN (storage area network)

내장 디스크: 본체 내부에 있다.

DAS: 본체 외부에 있다. 용량이 크다. 하지만 한 DAS를 여러 컴퓨터에서 공유할 수 없다.

NAS: 본체 외부에 있다. 네트워크로 컴퓨터 본체와 통신한다.

SAN: 여러 컴퓨터가 동시에 공유할 수 있다.

> aws에서 amazon aurora라는 데이터베이스 서비스를 제공한다. 

> amazon aurora도 nas로 볼 수 있을까?

### 5.1.2 디스크 드라이브와 SDD

sdd가  디스크 드라이브보다 약 100배 빠르다.

### 5.1.3 랜덤 I/O와 순차 I/O

순차 I/O는 3개의 페이지를 디스크에 기록하기 위해 1번 시스템 콜을 요청했지만, 랜덤 I/O는 3개의 페이지를 디스크에 기록하기 위해 3번 시스템 콜을 요청했다. 즉 디스크에 기록해야 할 위치를 찾기 위해 순차 I/O는 디스크의 헤드를 1번 움직였고, 랜덤 I/O는 디스크 헤드를 3번 움직인 것이다. 

### 5.2 인덱스란

**207p 인덱스를 sortedList로 단순하게 생각한다면**

그러면 이제 SortedList의 장점과 단점을 통해 인덱스의 장점과 단점을 살펴보자. SortedList 자료구조는 데이터가 저장될 때마다 항상 값을 정렬해야 하므로 저장하는 과정이 복잡하고 느리지만, 이미 정렬돼 있어서 아주 빨리 원하는 값을 찾아올 수 있다. DBMS의 인덱스도 인덱스가 많은 테이블은 당연히  insert나 update 그리고 delete 문장의 처리가 느려진다. 하지만 이미 정렬된 "찾아보기"용 표를 가지고 있기 때문에 select 문장은 매우 빠르게 처리할 수 있다.

결론적으로 dbms에서 인덱스는 데이터의 저장(insert, update, delete) 성능을 희생하고 그 대신 데이터의 읽기 속도를 높이는 기능이다. 여기서도 알 수 있듯이 테이블의 인덱스를 하나 더 추가할지 말지는 데이터의 저장 속도를 어디까지 희생할 수 있는지, 읽기 속도를 얼마나 더 빠르게 만들어야 하는지의 여부에 따라 결정되어야 한다. select 쿼리 문장의 where 조건절에 사용되는 컬럼이라고 전부 인덱스로 생성하면 데이터 저장 성능이 떨어지고 인덱스의 크기가 비대해져서 오히려 역효과만 불러올 수 있다.

**알고리즘으로 분류하는 인덱스**

- b-tree 인덱스: 원래의 데이터를 변형하지 않고 인덱스를 저장한다. 전방 일치 검색과 같이 값의 일부만 가지고도 검색이 가능하다.
- hash 인덱스: 원래의 데이터를 변형하여 인덱스를 저장한다. 전방 일치 검색이 불가능하다.
- fractal-tree 인덱스

**데이터의 중복 여부로 분류하는 인덱스**

데이터의 중복 허용 여부로 분류하면 유니크 인덱스와 유니크하지 않은 인덱스로 구분할 수 있다. 인덱스가 유니크한지 아닌지는 단순하게 같은 값이 1개만 존재하는지 1개 이상 존재할 수 있는지를 의미하지만 실제 dbms의 쿼리를 샐행하는 옵티마이저에게는 상당히 중요한 문제가 된다. 유니크 인덱스에 대해 동등 조건으로 검색한다는 건 항상 1건의 레코드만 찾으면 더 찾지 않아도 된다는 것을 옵티마이저에게 알려주는 효과를 낸다.

### 5.3.1 B 트리의 구조 및 특성

- 루트 노드, 브랜치 노드, 리프 노드가 있다.

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0071a1e-c8b4-4d0a-9502-fb46131aab7a/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0071a1e-c8b4-4d0a-9502-fb46131aab7a/Untitled.png)

...

인덱스 레인지 스캔은 데이터를 읽기 위해 주로 랜덤 I/O를 사용하며, 풀 테이블 스캔은 순차 I/O를 사용한다. 그래서 큰 테이블의 레코드 대부분을 읽는 작업에서는 인덱스를 사용하지 않고 풀 테이블 스캔을 사용하도록 유도할 때도 있다.
